<b>Login</b><br/>
<span tal:replace="message"/>
<span tal:condition="logged_in">
  You are logged in as ${logged_in}.
  <a href="${request.application_url}/logout">Logout</a>
</span>
<form action="${request.route_url('login')}" method="post" tal:condition="not logged_in">
  <input type="hidden" name="came_from" value="${came_from}"/>
  <input type="text" name="login" value="${login}" placeholder="Login"/><br/>
  <input type="password" name="password"
         value="${password}" placeholder="password"/><br/>
  <input type="submit" name="form.submitted" value="Log In"/>
</form>
Or else <a href="${request.application_url}/signup">Sign-up</a>.<br/>
<h4>Login with Google+:</h4>
<span id="signinButton">
  <span
    class="g-signin"
    data-callback="signinCallback"
    data-clientid="311409363904-tdvcelhl4t7g1n2d14fht1hl4g9m3rk6.apps.googleusercontent.com"
    data-cookiepolicy="single_host_origin"
    data-reqeustvisibleactions="https://schema.org/AddAction"
    data-scope="profile">
  </span>
</span>
<script type="text/javascript">
  (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/client:plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();

  function signinCallback(authResult) {
      if (authResult['status']['signed_in']) {
          // Update the app to reflect a signed in user
          document.getElementById('signinButton').setAttribute('style', 'display: none');
          gapi.client.load('plus', 'v1', function() {
              var request = gapi.client.plus.people.get( {'userId' : 'me'} );
              request.execute( function(profile) {
                  console.log('User id: ' + profile.id);
                  console.log('Name: ' + profile.name.givenName);
              });
          });
      } else {
          // Update the app to reflect a signed out user
          console.log('Sign-in state: ' + authResult['error']);
      }
  }
</script>
